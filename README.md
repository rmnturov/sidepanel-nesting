# Side Panel Layering App

Наслаивающиеся боковые панели

## Особенности
- Панели открываются справа с плавной анимацией и наслоением.
- Поддерживается до 3 одновременно видимых панелей (остальные скрыты для производительности, но корректно анимируются при закрытии).
- Ширина панели выбирается случайно из набора `960 / 640 / 400` при каждом открытии.
- Несколько backdrop’ов с синхронной анимацией opacity (линейная 300ms): при открытии новый появляется, предыдущий исчезает; при закрытии — наоборот.
- Фокус изолирован внутри верхней панели
- Клик по backdrop закрывает все панели.
- Управление клавиатурой: `Esc` закрывает верхнюю панель.
- Автофокус: при загрузке страницы — на кнопку «Открыть панель» в контенте; при открытии панели — на кнопку «Открыть панель» внутри верхней панели.

## Анимации и слои
- Тайминги: 300ms; backdrop — `opacity` c `transition: opacity 0.3s linear`; панели — `transform/opacity/scale` c `cubic-bezier(0.4, 0.0, 0.2, 1)`.
- Открытие панели: старт `translateX(100%)`, целевое `translateX(0)`; для lower/bottom применяются смещения влево и уменьшение масштаба (`scale 0.95` и `0.9`, смещение на 1–2 offset).
- Закрытие панели: возврат transform к `translateX(100%)`, opacity плавно к 0.
- Стек слоёв панелей: верхняя — нормальная; ниже — `lower` (сдвиг влево, scale 0.95, opacity 1); ещё ниже — `bottom` (доп. сдвиг, scale 0.9, opacity 0).
- Backdrop: всегда один видимый — только под верхней панелью. При открытии новой панели новый backdrop появляется (`opacity: 0→1`), предыдущий синхронно исчезает (`1→0`); при закрытии — наоборот.
- Инертность и фокус: только верхняя панель и её backdrop активны; остальные панели, их backdrop’ы и основной контент получают `inert`, чтобы фокус не покидал верхний слой.

## Установка и запуск
```bash
# Установка зависимостей
npm install

# Запуск dev сервера
npm run dev

# Сборка для production
npm run build
```

## Структура проекта
- `src/App.jsx` — логика стека панелей, управление состояниями, фокусом и backdrop’ами.
- `src/components/SidePanel.jsx` — контейнер панели, состояния layered-анимаций и inert.
- `src/components/Backdrop.jsx` — backdrop с плавной анимацией opacity и расчетом z-index относительно уровня панели.
- `src/App.css`, `src/components/*.css` — стили анимаций, layered-состояний и отступов.

## Использование
1) Нажмите «Открыть панель» в контенте — откроется панель со случайной шириной.  
2) Внутри панели нажмите «Открыть панель», чтобы добавить еще одну; до 3 панелей видимы одновременно.  
3) Клик по backdrop — закрывает все панели; `Esc` — закрывает верхнюю панель.  
4) Фокус остается внутри верхней панели; элементы под ней и основной контент недоступны для фокуса до закрытия.  

